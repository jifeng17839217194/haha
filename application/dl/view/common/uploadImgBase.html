<div class="row">
    <div class="col-sm-10">
        <ul class="ace-thumbnails clearfix" id="[fieldName]Thumbnails">
            <!-- <li>
                            <a href="/chiguanshi/public\uploads\20170115\60289807.png" data-rel="colorbox">
                                <img width="150" height="150" alt="150x150" src="/chiguanshi/public\uploads\20170115\60289807.png" />
                            </a>
                            <div class="tools tools-top in">
                                <a href="javascript:;">
                                    <i class="ace-icon fa fa-times red"></i>
                                </a>
                                <a href="javascript:;">
                                    <i class="ace-icon fa fa-pencil"></i>
                                </a>
                            </div>
                        </li> -->
        </ul>
    </div>
</div>
<div class="space-4"></div>
<div class="row">
    <div class="col-xs-10 col-sm-8">
        <div class="input-group">
            <input class="form-control" type="hidden" value="[defaultValue]" name="[fieldName]" id="[fieldName]" />
            <script type="text/javascript" src="/static/common/js/uploadify/jquery.uploadifive.min.js"></script>
            <link rel="stylesheet" type="text/css" href="/static/common/js/uploadify/uploadifive.css">
            <input type="file" style="display: none;" disabled="[disabled]"  name="[fieldName]File" id="[fieldName]File">
            <script type="text/javascript">
            $(function() {

                var insertImg[fieldName] = function(src) {

                    var autoiconpicture = src;

                    //上传的文件，就显示常见扩展名的图标
                    try{
                        switch(autoiconpicture.split(".")[1])
                        {
                            case "jpg":
                            case "gif":
                            case "bmp":
                            case "jpeg":
                                autoiconpicture = src;
                            break;
                            case "xls":
                                autoiconpicture="/static/common/image/uploadicon/xls.png";
                            break;
                            case "csv":
                                autoiconpicture="/static/common/image/uploadicon/csv.png";
                            break;
                            case "doc":
                                autoiconpicture="/static/common/image/uploadicon/doc.png";
                            break;
                            default:

                        }
                    }catch(e)
                    {

                    }

                    var insertImg = '';
                    insertImg += '<li>';
                    insertImg += '    <a href="' + src + '" data-rel="colorbox">';
                    insertImg += '        <img width="[imgWidth]" height="[imgHeight]" style="background-image:url(' + autoiconpicture + '); background-repeat: no-repeat;background-size: cover; background-position: center center;" src="/static/common/image/empty.gif" />';
                    insertImg += '    </a>';
                    insertImg += '    <div class="tools tools-top in">';
                    insertImg += '        <a href="javascript:;" onclick="javascript:$(\'#[fieldName]Thumbnails\').html(\'\');$(\'#[fieldName]\').val(\'\');">';
                    insertImg += '            <i class="ace-icon fa fa-times red"></i>';
                    insertImg += '        </a>';
                    insertImg += '    </div>';
                    insertImg += '</li>';
                    return insertImg;
                }

                $('#[fieldName]File').uploadifive({
                    'buttonText': '上传',
                    'formData':<?php echo(isset($uploadScriptformData)?$uploadScriptformData:"{}"); ?>,//自定义上传的其它参数
                    'uploadScript': '<?php echo(isset($uploadScript)?$uploadScript:url("uploadfile")); ?>',//自定义上传的地址
                    'fileType': '<?php echo(isset($uploadFileType)?$uploadFileType:'*.gif; *.jpg;*.png;*.xls;*.csv'); ?>',
                    'fileSizeLimit': '<?php echo(isset($uploadFileSizeLimit)?$uploadFileSizeLimit:'5MB'); ?>',
                    'method':'post',
                    'multi': false,
                    'onUploadComplete': function(file, data) {
                        var rs = JSON.parse(data);
                        if (rs.code == 0) {
                            layer.alert(rs.message);
                            setTimeout(function() {
                                $(".uploadifive-queue").hide();
                            }, 2000);
                        } else {
                            //图片预览
                            var aceThumbnails = $("#[fieldName]Thumbnails");
                            aceThumbnails.html(insertImg[fieldName](rs.data));
                            $('#[fieldName]').val(rs.data);
                            $(".uploadifive-queue").hide();
                            $("a[data-rel='colorbox']").colorbox();
                        }
                    },
                    'onError':function(errorType, file) {
                        if (file != 0) {
                            var settings = $('#[fieldName]File').data('uploadifive').settings;
                            console.log(settings);
                            switch (errorType) {
                                case 'UPLOAD_LIMIT_EXCEEDED':
                                    layer.alert("上传的文件数量已经超出系统限制的" + settings.queueSizeLimit + "个文件！");
                                    break;
                                case 'FILE_SIZE_LIMIT_EXCEEDED':
                                    layer.alert("文件 [" + file.name + "] 超过了" + (settings.fileSizeLimit/1024) + "KB！");
                                    break;
                                case 'QUEUE_LIMIT_EXCEEDED':
                                    layer.alert("任务数量超出队列限制");
                                    break;
                                case 'FORBIDDEN_FILE_TYPE':
                                    layer.alert("文件 [" + file.name + "] 类型不正确！");
                                    break;
                                case '404_FILE_NOT_FOUND':
                                    layer.alert("文件未上传成功或服务器存放文件的文件夹不存在");
                                    break;
                            }
                        }
                    }
                });
                if ("[defaultValue]" != "") {
                    var aceThumbnails = $("#[fieldName]Thumbnails");
                    aceThumbnails.html(insertImg[fieldName]("[defaultValue]"));
                    $(".uploadifive-queue").hide();
                    $("a[data-rel='colorbox']").colorbox();
                }
            });
            </script>
        </div>
    </div>
    <span class="help-inline col-xs-12 col-sm-7">
                <span class="middle">[helpInfo]</span>
    </span>
</div>
