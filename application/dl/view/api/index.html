{extend name="common/common"} {block name="breadcrumbs"}
<ul class="breadcrumb">
    <li class="active">
        <i class="ace-icon fa fa-home home-icon"></i>
        <span _href="#">APP接口文档</span>
    </li>
    <li class="active">
        管理
    </li>
</ul>
<!-- #section:basics/content.searchbox -->
<div class="nav-search" id="nav-search">
    <form class="form-search form-inline">
        

        <span class="input-icon">
            <input type="text" placeholder="关键词" name="keyword" value="{:input('get.keyword')}" class="nav-search-input" autocomplete="off" />
            <i class="ace-icon fa fa-search nav-search-icon"></i>
        </span>
        <input type="submit" class="btn btn-info btn-xs " value="搜索">
        {if checkActionAuth()}
        <a href="{:url('add')}" class="btn btn-info btn-xs "><i class="glyphicon glyphicon-plus"></i>新增</a>
        {/if}
    </form>
</div>
{/block} {block name="page-content"}
<form action="" id="form2" method="POST">
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th width="20">
                    <input class="ace" onclick="javascript:thisApp.selectByChecked($(this),'api_id');" type="checkbox" />
                    <span class="lbl"></span>
                </th>
                <th width="">APP栏目名称</th>
                <th width="100">控制器/方法</th>
                <th width="100">请求方式</th>
                <th width="250">请求参数(实际为URL拼接)</th>
                <th width="500">返回</th>
                <th width="151"><i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>更新时间</th>
                <th width="120">操作</th>
            </tr>
        </thead>
        {volist name="lists" id="vo"}
        <tr >
            <td align="center">
                <input class="ace" name="api_id[]" type="checkbox" value="{$vo.api_id}" />
                <span class="lbl"></span>
            </td>
            <td>{$vo.api_title}</td>
            <td>
                <a href="{:url('api/'.$vo['api_model'].'/'.$vo['api_action'])}" target="_blank">{$vo.api_model}/{$vo.api_action}</a>
            </td>
            <td>{$vo.api_type}</td>
            <td><pre>{$vo.api_param}</pre></td>
            <td><pre style="width:600px;">{$vo.api_result}</pre></td>
            <td>{$vo.api_updatetime}</td>
            <td>
                {if checkActionAuth('','add')}
                <a href="{:url('add?api_id='.$vo['api_id'])}" class="tooltip-success" data-rel="tooltip" title="编辑"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span>编辑</a> &nbsp;
                {/if}

                {if checkActionAuth()}
                <a ajax='{"confirm":"删除吗？","url":"{:url("delete?api_id=" .$vo[ "api_id"])} "}' href="javascript:; " class="tooltip-error "><span class="red "><i class="ace-icon fa fa-trash-o bigger-120 "></i></span>删除</a>
                {/if}
            </td>
        </tr>
        {/volist}
    </table>
</form>
<div class="pull-left ">
    {if checkActionAuth()}
        <a ajax='{"confirm":"删除吗？ ","data-form":"#form2 ","url":"{:url("delete")}"}' class="btn btn-white btn-inverse btn-sm " href="javascript:; ">删除</a>
    {/if}
    {if checkActionAuth('','add')}
        <a ajax='{"confirm":"复制吗？","data-form":"#form2 ","url":"{:url("copy")}"}' class="btn btn-white btn-inverse btn-sm " href="javascript:; ">复制</a>
    {/if}
    <!-- <a onclick="doloadtable() " class="btn btn-white btn-inverse btn-sm " href="javascript:; ">
                                        导出表格
                                    </a> -->
</div>
<div class="pull-right ">
    共{$lists->total()}条记录
    <br /> {$lists->render()}
</div>
<div class="clearfix ">
</div>
{/block}
